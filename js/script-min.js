"use strict";let modalWindow,buttonClose,buttonModalContact=document.querySelector(".button--modal--contact"),buttonModalMap=document.querySelector(".button--modal--map"),headerUser=document.querySelector(".header__user-area"),contactName=document.querySelector(".contact-form__input--name"),contactEmail=document.querySelector(".contact-form__input--email"),contactText=document.querySelector(".contact-form__input--letter"),contactForm=document.querySelector(".contact-form"),isStorageSupport=!0,storage="";try{storage=localStorage.getItem("userName")}catch(e){isStorageSupport=!1}isStorageSupport&&((storage=localStorage.getItem("isLogined"))?"yes"===storage&&headerUser.classList.add("header__user-area--logined"):localStorage.setItem("isLogined","no"));let buttonLogin=document.querySelector(".user-button--icon--login");buttonLogin.addEventListener("click",function(e){e.preventDefault(),headerUser.classList.add("header__user-area--logined"),isStorageSupport&&localStorage.setItem("isLogined","yes")});let buttonLogout=document.querySelector(".user-button--icon--logout");buttonLogout.addEventListener("click",function(e){e.preventDefault(),headerUser.classList.remove("header__user-area--logined"),isStorageSupport&&localStorage.setItem("isLogined","no")}),buttonModalContact&&buttonModalContact.addEventListener("click",function(e){e.preventDefault(),windowShow(e,".modal--contact")}),buttonModalMap&&buttonModalMap.addEventListener("click",function(e){e.preventDefault(),windowShow(e,".modal--map")});let body=document.querySelector("body");function windowShow(e,t){switch(t){case".modal--contact":(modalWindow=document.querySelector(".modal--contact")).classList.add("modal--show"),contactText.focus(),isStorageSupport?((storage=localStorage.getItem("userName"))?contactName.value=storage:contactName.focus(),(storage=localStorage.getItem("userEmail"))?contactEmail.value=storage:contactName.value&&contactEmail.focus()):contactName.focus();break;case".modal--map":(modalWindow=document.querySelector(".modal--map")).classList.add("modal--show");break;case".cart-add":(modalWindow=document.querySelector(".cart-add")).classList.add("modal--show")}buttonClose=document.querySelector(t+" .button-close"),addEventClose()}function addEventClose(){buttonClose.addEventListener("click",function(e){e.preventDefault(),modalWindow.classList.remove("modal--show"),modalWindow.classList.remove("modal--error")})}body.addEventListener("click",function(e){let t=e.target;if(t.classList.contains("button--buy")){return e.preventDefault(),windowShow(e,".cart-add"),document.querySelector(".header__cart-quantity").textContent++,void document.querySelector(".header__shop-button--cart").classList.add("header__shop-button--active")}if(t.classList.contains("button--like")){return e.preventDefault(),document.querySelector(".header__liked-quantity").textContent++,void document.querySelector(".header__shop-button--bookmarks").classList.add("header__shop-button--active")}}),contactForm&&contactForm.addEventListener("submit",function(e){contactName.value&&contactEmail.value&&contactText.value?isStorageSupport&&(localStorage.setItem("userName",contactName.value),localStorage.setItem("userEmail",contactEmail.value)):(e.preventDefault(),modalWindow.classList.remove("modal--error"),modalWindow.offsetWidth,modalWindow.classList.add("modal--error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&modalWindow.classList.contains("modal--show")&&(e.preventDefault,modalWindow.classList.remove("modal--show"),modalWindow.classList.remove("modal--error"))});let btnLeft=document.querySelector(".slider__toggle--left"),btnRight=document.querySelector(".slider__toggle--right");function toggleSlider(e){let t=document.querySelector(".slider__item--active");t.classList.remove("slider__item--active");let o,a,n=document.querySelector(".slider__point-item--active");n.classList.remove("slider__point-item--active"),e?t.nextElementSibling?(o=t.nextElementSibling,a=n.nextElementSibling):(o=t.parentElement.firstElementChild,a=n.parentElement.firstElementChild):t.previousElementSibling?(o=t.previousElementSibling,a=n.previousElementSibling):(o=t.parentElement.lastElementChild,a=n.parentElement.lastElementChild),o.classList.add("slider__item--active"),a.classList.add("slider__point-item--active")}btnLeft&&(btnLeft.addEventListener("click",function(e){e.preventDefault,toggleSlider(!1)}),btnRight.addEventListener("click",function(e){e.preventDefault,toggleSlider(!0)}));let btnPointList=document.querySelector(".slider__point-list");btnPointList&&btnPointList.addEventListener("click",function(e){e.preventDefault();let t=e.target;if(!t.classList.contains("slider__point"))return;document.querySelector(".slider__point-item--active").classList.remove("slider__point-item--active"),document.querySelector(".slider__item--active").classList.remove("slider__item--active"),t.parentElement.classList.add("slider__point-item--active");let o=document.querySelectorAll(".slider__point-item");for(let e=0;e<o.length;e++)if(o[e].classList.contains("slider__point-item--active")){document.querySelectorAll(".slider__item")[e].classList.add("slider__item--active");break}});let tabbedSlider=document.querySelector(".tabbed-slider__buttons-list");tabbedSlider&&tabbedSlider.addEventListener("click",function(e){e.preventDefault();let t=e.target;if(!t.classList.contains("tabbed-button"))return;document.querySelector(".tabbed-button--active").classList.remove("tabbed-button--active"),document.querySelector(".tabbed-slider__content--active").classList.remove("tabbed-slider__content--active"),t.classList.add("tabbed-button--active");let o=document.querySelectorAll(".tabbed-button"),a=0;for(;a<o.length;)o[a].classList.contains("tabbed-button--active")&&document.querySelectorAll(".tabbed-slider__content")[a].classList.add("tabbed-slider__content--active"),a++});let minicardList=document.querySelector(".minicard-list");minicardList.addEventListener("focusin",function(e){e.preventDefault(),e.target.parentElement.parentElement.classList.add("minicard-list__item--active")}),minicardList.addEventListener("focusout",function(e){e.preventDefault(),e.target.parentElement.parentElement.classList.remove("minicard-list__item--active")});